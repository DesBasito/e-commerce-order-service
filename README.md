# Order Service

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

Order Service - —ç—Ç–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞–º–∏ –≤ e-commerce —Å–∏—Å—Ç–µ–º–µ. –û–Ω –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—è —Å –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤, —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–∞
- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å Customer Service –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å Product Service –¥–ª—è —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Payment Service –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π
- –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ Kafka
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Order Lines (–¥–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞)
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞–∫–∞–∑–æ–≤ –∏ –¥–µ—Ç–∞–ª–µ–π

## ‚öôÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Java 17**
- **Spring Boot 3.5.3**
- **Spring Data JPA**
- **Spring Cloud OpenFeign** (–¥–ª—è –º–µ–∂—Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è)
- **Spring Cloud Config Client**
- **Spring Cloud Netflix Eureka Client**
- **Spring Kafka** (–¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)
- **PostgreSQL**
- **Lombok**
- **Maven**

## üóÑÔ∏è –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

### Order Entity
```java
@Entity
public class Order {
    @Id
    @GeneratedValue
    private Integer id;
    
    @Column(unique = true, nullable = false)
    private String reference;
    
    private BigDecimal totalAmount;
    
    @Enumerated(EnumType.STRING)
    private PaymentMethod paymentMethod;
    
    private String customerId;
    
    @OneToMany(mappedBy = "order")
    private List<OrderLine> orderLines;
    
    @CreatedDate
    private LocalDateTime createdDate;
    
    @LastModifiedDate
    private LocalDateTime lastModifiedDate;
}
```

### OrderLine Entity
```java
@Entity
@Table(name = "customer_line")
public class OrderLine {
    @Id
    @GeneratedValue
    private Integer id;
    
    @ManyToOne
    @JoinColumn(name = "order_id")
    private Order order;
    
    private Integer productId;
    private double quantity;
}
```

### PaymentMethod Enum
```java
public enum PaymentMethod {
    PAYPAL,
    CREDIT_CARD,
    VISA,
    MASTER_CARD,
    BITCOIN
}
```

## üöÄ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
- Config Server (http://localhost:8888)
- Discovery Service (http://localhost:8761)
- Customer Service (http://localhost:8090)
- Product Service (http://localhost:8050)
- Payment Service
- PostgreSQL (localhost:5555)
- Kafka (–¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)
- Java 17+
- Maven 3.6+

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone <repository-url>
cd services/order

# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
./mvnw clean install

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
./mvnw spring-boot:run
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### application.yml
```yaml
spring:
  config:
    import: optional:configserver:http://localhost:8888
  application:
    name: order-service
```

### order-service.yml (–≤ Config Server)
```yaml
spring:
  datasource:
    url: jdbc:postgresql://localhost:5555/order
    username: qwe
    password: qwe
    driver-class-name: org.postgresql.Driver
  jpa:
    hibernate:
      ddl-auto: update
    database: postgresql
    database-platform: org.hibernate.dialect.PostgreSQLDialect

application:
  config:
    customer-url: http://localhost:8090/api/v1/customer
    product-url: http://localhost:8050/api/v1/products
    payment-url: http://localhost:8080/api/v1/payments

server:
  port: 8070
```

## üåê API Endpoints

### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
```http
POST /api/v1/orders
Content-Type: application/json

{
  "reference": "ORD-2024-001",
  "amount": 2899.97,
  "paymentMethod": "CREDIT_CARD",
  "customerId": "507f1f77bcf86cd799439011",
  "products": [
    {
      "productId": 1,
      "quantity": 2
    },
    {
      "productId": 2,
      "quantity": 1
    }
  ]
}
```

**–û—Ç–≤–µ—Ç:**
```json
15
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤
```http
GET /api/v1/orders
```

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "id": 15,
    "reference": "ORD-2024-001",
    "amount": 2899.97,
    "paymentMethod": "CREDIT_CARD",
    "customerId": "507f1f77bcf86cd799439011"
  }
]
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –ø–æ ID
```http
GET /api/v1/orders/{order-id}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": 15,
  "reference": "ORD-2024-001", 
  "amount": 2899.97,
  "paymentMethod": "CREDIT_CARD",
  "customerId": "507f1f77bcf86cd799439011"
}
``` 

### –ü–æ–ª—É—á–µ–Ω–∏–µ Order Lines –ø–æ ID –∑–∞–∫–∞–∑–∞
```http
GET /api/v1/order-lines/order/{order-id}
```

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "id": 25,
    "quantity": 2.0
  },
  {
    "id": 26,
    "quantity": 1.0
  }
]
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤
```
kg.manurov.ecommerce/
‚îú‚îÄ‚îÄ controller/
‚îÇ   ‚îú‚îÄ‚îÄ OrderController.java
‚îÇ   ‚îî‚îÄ‚îÄ OrderLineController.java
‚îú‚îÄ‚îÄ dto/
‚îÇ   ‚îú‚îÄ‚îÄ order/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ OrderRequest.java
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ OrderResponse.java
‚îÇ   ‚îî‚îÄ‚îÄ orderLine/
‚îÇ       ‚îú‚îÄ‚îÄ OrderLineRequest.java
‚îÇ       ‚îî‚îÄ‚îÄ OrderLineResponse.java
‚îú‚îÄ‚îÄ feign/
‚îÇ   ‚îú‚îÄ‚îÄ customer/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CustomerClient.java
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CustomerResponse.java
‚îÇ   ‚îú‚îÄ‚îÄ payment/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PaymentClient.java
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PaymentRequest.java
‚îÇ   ‚îî‚îÄ‚îÄ product/
‚îÇ       ‚îú‚îÄ‚îÄ ProductClient.java
‚îÇ       ‚îú‚îÄ‚îÄ PurchaseRequest.java
‚îÇ       ‚îî‚îÄ‚îÄ PurchaseResponse.java
‚îú‚îÄ‚îÄ kafka/
‚îÇ   ‚îú‚îÄ‚îÄ OrderConfirmation.java
‚îÇ   ‚îî‚îÄ‚îÄ OrderProducer.java
‚îú‚îÄ‚îÄ mapper/
‚îÇ   ‚îú‚îÄ‚îÄ OrderMapper.java
‚îÇ   ‚îî‚îÄ‚îÄ OrderLineMapper.java
‚îú‚îÄ‚îÄ order/
‚îÇ   ‚îú‚îÄ‚îÄ Order.java
‚îÇ   ‚îú‚îÄ‚îÄ OrderLine.java
‚îÇ   ‚îî‚îÄ‚îÄ PaymentMethod.java
‚îú‚îÄ‚îÄ repositories/
‚îÇ   ‚îú‚îÄ‚îÄ OrderRepository.java
‚îÇ   ‚îî‚îÄ‚îÄ OrderLineRepository.java
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ OrderService.java
‚îÇ   ‚îî‚îÄ‚îÄ OrderLineService.java
‚îî‚îÄ‚îÄ OrderApplication.java
```

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞

### –ü–æ—à–∞–≥–æ–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º:

1. **–í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–∞
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞** - –≤—ã–∑–æ–≤ Customer Service –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞
3. **–†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤** - –≤—ã–∑–æ–≤ Product Service –¥–ª—è –ø–æ–∫—É–ø–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤
4. **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
5. **–°–æ–∑–¥–∞–Ω–∏–µ Order Lines** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π –∑–∞–∫–∞–∑–∞
6. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–∞** - –≤—ã–∑–æ–≤ Payment Service
7. **–û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏—è –≤ Kafka

### –ö–æ–¥ OrderService.createOrder():
```java
@Transactional
public Integer createOrder(OrderRequest request) {
    // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞
    CustomerResponse customer = customerClient.findCustomerById(request.customerId())
            .orElseThrow(() -> new BusinessException("Cannot create order:: No customer exists with the provided ID"));

    // 2. –†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
    List<PurchaseResponse> purchasedProducts = productClient.purchaseProducts(request.products());

    // 3. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
    Order order = repository.save(mapper.toOrder(request));

    // 4. –°–æ–∑–¥–∞–Ω–∏–µ Order Lines
    for (PurchaseRequest purchaseRequest : request.products()) {
        orderLineService.saveOrderLine(
                new OrderLineRequest(null, order.getId(), purchaseRequest.productId(), purchaseRequest.quantity())
        );
    }

    // 5. –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–∞
    PaymentRequest paymentRequest = new PaymentRequest(
            request.amount(), request.paymentMethod(), order.getId(), order.getReference(), customer
    );
    paymentClient.requestOrderPayment(paymentRequest);

    // 6. –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    orderProducer.sendOrderConfirmation(
            new OrderConfirmation(request.reference(), request.amount(), request.paymentMethod(), customer, purchasedProducts)
    );

    return order.getId();
}
```

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

### Customer Service (—á–µ—Ä–µ–∑ Feign Client)
```java
@FeignClient(name = "customer-service", url = "${application.config.customer-url}")
public interface CustomerClient {
    @GetMapping("/{customer-id}")
    Optional<CustomerResponse> findCustomerById(@PathVariable("customer-id") String customerId);
}
```

### Product Service (—á–µ—Ä–µ–∑ RestTemplate)
```java
@Service
public class ProductClient {
    
    @Value("${application.config.product-url}")
    private String productUrl;
    
    public List<PurchaseResponse> purchaseProducts(List<PurchaseRequest> requestBody) {
        HttpHeaders headers = new HttpHeaders();
        headers.set(CONTENT_TYPE, APPLICATION_JSON_VALUE);
        
        HttpEntity<List<PurchaseRequest>> requestEntity = new HttpEntity<>(requestBody, headers);
        
        ResponseEntity<List<PurchaseResponse>> responseEntity = restTemplate.exchange(
                productUrl + "/purchase", POST, requestEntity, 
                new ParameterizedTypeReference<>() {}
        );
        
        return responseEntity.getBody();
    }
}
```

### Payment Service (—á–µ—Ä–µ–∑ Feign Client)
```java
@FeignClient(name = "product-service", url = "${application.config.payment-url}")
public interface PaymentClient {
    @PostMapping
    Integer requestOrderPayment(@RequestBody PaymentRequest request);
}
```

## üì® Kafka Integration

### OrderProducer
```java
@Service
public class OrderProducer {
    
    private final KafkaTemplate<String, OrderConfirmation> kafkaTemplate;
    
    public void sendOrderConfirmation(OrderConfirmation orderConfirmation) {
        Message<OrderConfirmation> message = MessageBuilder
                .withPayload(orderConfirmation)
                .setHeader(TOPIC, "order-topic")
                .build();
        
        kafkaTemplate.send(message);
    }
}
```

### OrderConfirmation Event
```java
public record OrderConfirmation(
    String orderReference,
    BigDecimal totalAmount,
    PaymentMethod paymentMethod,
    CustomerResponse customer,
    List<PurchaseResponse> products
) {}
```

### Kafka Topic Configuration
```java
@Configuration
public class KafkaOrderTopicConfig {
    
    @Bean
    public NewTopic orderTopic() {
        return TopicBuilder
                .name("order-topic")
                .build();
    }
}
```

## üîç –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### OrderRequest
- `amount` - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º
- `paymentMethod` - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ
- `customerId` - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ, –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º
- `products` - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å –º–∏–Ω–∏–º—É–º –æ–¥–Ω–∏–º —Ç–æ–≤–∞—Ä–æ–º

### PurchaseRequest
- `productId` - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ
- `quantity` - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º

### –ü—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
```json
{
  "title": "–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏",
  "errors": {
    "amount": ["Order amount should be positive"],
    "customerId": ["Customer should be present"],
    "products": ["You should at least purchase one product"]
  }
}
```

## üîß –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –¢–∏–ø—ã –æ—à–∏–±–æ–∫

1. **BusinessException (404)**
   ```json
   "Cannot create order:: No customer exists with the provided ID"
   ```

2. **EntityNotFoundException (404)**
   ```json
   "No order found with the provided ID: 15"
   ```

3. **Product Purchase Exception (400)**
   ```json
   "An error occurred while processing the products purchase: 400 BAD_REQUEST"
   ```

4. **ValidationException (400)**
   ```json
   {
     "title": "–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏",
     "errors": {
       "amount": ["Order amount should be positive"]
     }
   }
   ```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Health Check
```http
GET /actuator/health
```

### Kafka Health Check
Spring Boot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Kafka:
```json
{
  "status": "UP",
  "components": {
    "kafka": {
      "status": "UP"
    }
  }
}
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **Customer Service –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω**
    - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Customer Service –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 8090
    - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é customer-url –≤ Config Server

2. **Product Service –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω**
    - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Product Service –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 8050
    - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é product-url –≤ Config Server

3. **Kafka –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω**
    - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Kafka –∑–∞–ø—É—â–µ–Ω
    - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Kafka –≤ application.yml

4. **PostgreSQL –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω**
    - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 5555
    - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö 'order'

5. **Feign Client –æ—à–∏–±–∫–∏**
    - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ Eureka
    - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ URL –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
order/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ java/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ kg/manurov/ecommerce/
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ configs/
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ KafkaOrderTopicConfig.java
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ RestTemplate.java
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ controller/
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ OrderController.java
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ OrderLineController.java
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ dto/
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ order/
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ orderLine/
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ errors/
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ BusinessException.java
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ feign/
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ customer/
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ payment/
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ product/
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ handler/
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ ErrorResponseBody.java
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ GlobalExceptionHandler.java
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ kafka/
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ OrderConfirmation.java
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ OrderProducer.java
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ mapper/
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ OrderMapper.java
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ OrderLineMapper.java
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ order/
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ Order.java
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ OrderLine.java
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ PaymentMethod.java
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ repositories/
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ OrderRepository.java
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ OrderLineRepository.java
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ ErrorService.java
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ OrderService.java
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ OrderLineService.java
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ OrderApplication.java
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ resources/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ application.yml
‚îÇ   ‚îî‚îÄ‚îÄ test/
‚îú‚îÄ‚îÄ target/
‚îú‚îÄ‚îÄ pom.xml
‚îî‚îÄ‚îÄ README.md
```